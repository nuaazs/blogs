# Git pull冲突解决方案

用git pull来更新代码的时候，遇到了下面的问题

```shell
error: Your local changes to the following files would be overwritten by merge: Please, commit your changes or stash them before you can merge
```

出现这个问题的原因是其他人修改了某文件并提交到版本库中去了，而你本地也修改了某文件，这时候你进行`git pull`操作就好出现冲突了，解决方法，在上面的提示中也说的很明确了。

保留本地的方式修改（强烈推荐，还有一种是直接拉取服务器的（不推荐使用就不写了），这样你本地修改的代码的，就会舍弃，相当于你写的代码直接没，你还的重新写）

## 解决方式

### 选择1:没有commit

没有`commit`操作，自己修改了文件然后，然后`git pull`，这时候是不可以直接`pull`的，需要先`git status`查找修改文件，进行`git add`操作。



#### 问题1

为什么要先`commit`，然后再`pull`，然后再`push`，我`pull`了岂不是吧自己的代码给覆盖了么。

#### 回答1

先commit再pull最后再push就是为了应对多人合并开发的情况，commit是为了告诉git我这次改了那些东西，不然只是改了但是git并不知道，也就无法判断比较。pull是为了本地commit和远程commit的对比记录，git是按照文件的行数操作进行对比的，如果同时操作了某个文件的同一行那么就会产生冲突，git也会把这个冲突给标记出来，这个时候就需要先把你和冲突的那个人拉过来问问保留谁的代码。然后再`git add && git commit && git pull`三连，再次pull是为了防止你们协商的时候另一个人又提交了一个版本的东西。

#### 补充1

出现代码覆盖或者丢失的情况：比如A、B两个人的代码pull的时候版本都是1，A在本地提交了2，3并且推送到了远程了，B进行修改的时候没有commit操作，他先自己写了东西，然后git pull的时候B本地版本已经到3了，B在本地版本3的时候修改了A写过的代码，再进行了git commit && gi t push操作，那么远程版本就是4。而且A的代码也被覆盖了，所以说，所有人的代码都要先commit再pull，不然会直接覆盖代码！

> 强调如下：如果没有commit执行git pull，上面B修改的时候不是同一块代码，才可以成功更新（pull）下来到本地仓库，但是此时IDEA里面看不到最新内容，然后不知情的改了A写过的代码，再commit和push，可以成功覆盖git上面的A的修改。 此段主要强调的是：为了避免 不知情的修改了别人代码 还不报错的成功push上去，所以需要先commit再pull，目的就是为了能在IDEA上看的见A修改的代码。。。。文采不佳，这段话的确有点绕哈哈哈，实践胜于雄辩，建议自己试试几分钟就弄透彻了。
> 



#### 问题2

两个分支A和B，A合并B和B合并A，有区别吗？

#### 回答2

两个互相合并为一的区别就是A->B的时候，B分支上会产生一个merge_commit，被改变的分支是B；如果现在没有发生任何改动执行B->A，则A和B分支才会完全相同。



### 选择2:强制拉取远程

忽略本地修改，强制拉取远程到本地，主要是项目中的文档目录，看的时候可能多了些标注，现在远程文档更新，本地的版本已没有用，可以强制拉取：

```shell
git fetch --all
# git fetch会将数据拉取到本地仓库-他并不会自动合并或者修改当前的工作

git reset --hard origin/master
# master为远程分支名称，若远程分支为 haha，则 origin/haha即可
# 抛开所有的暂存和未分离的更改，忘记当前分支上的左右内容
# 使其完全相同作为 origin/master

git pull
# 从远处获取最新版本并merge到本地，会自动合并或修改当前的工作
```



### 选择3:保留本地的修改

通过`git stash`将工作区恢复到上次提交的内容，同时本分本地所做的修改，之后就可以正常`git pull`。完成后，执行`git stash pop`将之前本地做的修改应用到当前工作区。

```shell
git stash
# 备份当前的工作区内容，从最近的一次提取中读取相关内容，让工作区保证和上次提交的内容一致。
# 同时，将当前的工作区内容保存到Git栈中

git pull
# 拉取服务器上的代码 

git stash pop
# 从Git栈中读取最近一次保存的内容，恢复工作区的内容。
# 由于可能存在多个Stash的内容，所以用栈来管理，pop会从最近的一个stash中读取内容并恢复

git stash list
# 显示Git站内的所有备份，可以利用这个列表来决定从哪个地方恢复

git stash clear
# 清空Git栈，此时使用gitg等图形化工具会发现，原来stash那些节点都消失了
```